# Ozon Dashboard - –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **Sales Page - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏**
- ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞**: –í—ã—Ä—É—á–∫–∞ —Å—á–∏—Ç–∞–ª–∞—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –¢–µ–ø–µ—Ä—å `total_revenue` = `payout` (—á—Ç–æ —Ä–∞–≤–Ω–æ `price_total - commission_amount`)
- ‚úÖ **–§–∞–π–ª—ã**: `src/hooks/useSalesData.ts`

### 2. **Finance Page - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
- ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞**: –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å (–≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è 0)
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: 
  - –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `supabaseAlt` –∫–ª–∏–µ–Ω—Ç–∞
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ RPC —Ñ—É–Ω–∫—Ü–∏—è
  - –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è RPC —Ñ—É–Ω–∫—Ü–∏—è `get_finance_summary`
- ‚úÖ **–§–∞–π–ª—ã**: `src/hooks/useFinanceData.ts`

### 3. **RPC –§—É–Ω–∫—Ü–∏–∏ - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è**
- ‚úÖ **Sales**: `get_sales_metrics_by_date_type_correct` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏
- ‚úÖ **Finance**: `get_finance_summary` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

### 4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä–∞**
- ‚úÖ –£–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã TypeScript
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –≤ –≤–∞—à–µ–π Supabase –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Sales RPC —Ñ—É–Ω–∫—Ü–∏–∏**:
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ update_sales_metrics_function.sql
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ Finance RPC —Ñ—É–Ω–∫—Ü–∏–∏**:
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ create_finance_rpc_function.sql
   ```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ Sales —Ñ—É–Ω–∫—Ü–∏–∏
SELECT * FROM get_sales_metrics_by_date_type_correct('2025-08-01', '2025-08-05', 'shipment_date');

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ Finance —Ñ—É–Ω–∫—Ü–∏–∏
SELECT * FROM get_finance_summary('2025-08-01', '2025-08-05', 'shipment_date');
```

### –®–∞–≥ 3: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤–∫–ª–∞–¥–æ–∫ Sales –∏ Finance

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### Sales Page
- ‚úÖ –í—ã—Ä—É—á–∫–∞ —Ç–µ–ø–µ—Ä—å = `payout` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- ‚úÖ GMV = `price_total` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å = `payout - commission_amount` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

### Finance Page
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è Supabase –±–∞–∑–∞
- ‚úÖ RPC —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –û–±—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ fallback
- ‚úÖ –£–±—Ä–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –±–∞–∑
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –ø–æ –≤—Å–µ–º –≤–∫–ª–∞–¥–∫–∞–º
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Sales Page**: –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ 01.08.2025 - 05.08.2025
   - –í—ã—Ä—É—á–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `payout` –∑–Ω–∞—á–µ–Ω–∏—è
   - GMV –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `price_total` –∑–Ω–∞—á–µ–Ω–∏—è

2. **Finance Page**: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ –ø–µ—Ä–∏–æ–¥
   - –û–±—â–∏–π –¥–æ—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 0
   - –†–∞—Å—Ö–æ–¥—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

3. **–î—Ä—É–≥–∏–µ –≤–∫–ª–∞–¥–∫–∏**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ –Ω–µ —Å–ª–æ–º–∞–ª–∏—Å—å

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã —Ç–µ–ø–µ—Ä—å –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ñ–æ—Ä–º—É–ª–µ: `payout = price_total - commission_amount`
- Finance –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ü–µ–Ω–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ (8%), –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ (2%), —Ä–µ–∫–ª–∞–º—ã (3%), —É—Å–ª—É–≥ (5%)
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö RPC —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è sample –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production —Å–±–æ—Ä–∫–µ

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
npm run build

# –ó–∞–ø—É—Å–∫ –≤ development —Ä–µ–∂–∏–º–µ
npm run dev

# Production —Å–±–æ—Ä–∫–∞
npm run build
npm run preview
```
